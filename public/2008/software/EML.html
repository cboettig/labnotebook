<!DOCTYPE html>
<html lang="en" xmlns="https://www.w3.org/1999/xhtml" xml:lang="en">
  <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
  <title></title>
  <meta name="author" content="Carl Boettiger" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- HTML5 metadata -->
<meta name="keywords" content="" />
<meta name="description" content="" />
<!-- RDFa Metadata (in DublinCore) -->
<meta property="dc:title" content="" />
<meta property="dc:creator" content="Carl Boettiger" />
<meta property="dc:date" content="" />
<meta property="dc:format" content="text/html" />
<meta property="dc:language" content="en" />
<meta property="dc:identifier" content="/software/EML.html" />
<meta property="dc:rights" content="CC0" />
<meta property="dc:source" content="Lab Notebook" />
<meta property="dc:subject" content="Ecology" /> 
<meta property="dc:type" content="website" /> 

<!-- Google Scholar Metadata -->
<!--
<meta name="citation_author" content="Carl Boettiger"/>
<meta name="citation_date" content=""/>
<meta name="citation_title" content=""/>
<meta name="citation_journal_title" content="Lab Notebook"/>
-->
<!--NOTE: see also the COinS Metadata in span element in footer -->




  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <!-- Help the browser identify the RSS feed automatically -->
  <link rel="alternate" type="application/rss+xml" title="Carl Boettiger's Lab Notebook" href="/blog.xml" />
</head>


  <body prefix="dc: https://purl.org/dc/terms/ foaf: https://xmlns.com/foaf/0.1/"> 
    <!-- Navbar  ================================================== -->

<nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/README.html"><i class="icon-info-sign"></i></a>
    </div>

 <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

          <li  >
          <a href="/index.html">Home</a></li>
          <li  >
          <a href="/vita.html">Vita</a></li>
          <li  >
          <a href="/research.html">Research</a></li>
          <li  >
          <a href="/teaching.html">Teaching</a></li>
          <li  >
          <a href="/community.html">Community</a></li>
          <li  >
          <a href="/lab-notebook.html">Lab Notebook</a></li>

        </ul>

      <!-- Search site using Google's index -->
        <form class="navbar-form navbar-right" role="search" method="get" action="https://google.com/search">
          <div class="form-group">
            <input type="hidden" name="q" value="site:carlboettiger.info" />
            <input type="text" class="form-control search-query" name="q" placeholder="Search"/>
          </div>
          <button class="btn btn-mini" type="submit"><i class="icon-search"></i></button> 
       </form>

    </div><!--/.nav-collapse -->
  </div> <!-- /container -->
</nav>



    <div class="container"> <!-- Responsive grid layout, doesn't jump to full-width --> 
      <header>
        <h1 class="entry-title"></h1>
        <h2></h2>
      </header>

      <div class="row">
  <div class="col-md-8 col-md-offset-1">
    <article>
    <!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{An Introduction to the EML package}
-->

<p><a href="https://travis-ci.org/cboettig/labnotebook"><img src="https://travis-ci.org/cboettig/labnotebook.svg?branch=master" alt="Build Status" /></a></p>
<h1 id="about">About</h1>
<p><code>EML</code> is an R package for reading, writing, integrating and publishing data using the Ecological Metadata Language (EML) format.</p>
<ul>
<li><strong>Note:</strong> This package is still in active development and not yet submitted to CRAN. Functions and documentation may be incomplete and subject to change.</li>
<li>Maintainer: Carl Boettiger</li>
<li>Authors: Carl Boettiger, Claas-Thido Pfaff, Duncan Temple Lang, Karthik Ram, Matt Jones</li>
<li>License: <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a></li>
<li><a href="https://github.com/ropensci/EML/issues">Issues</a>: Bug reports, feature requests, and development discussion.</li>
</ul>
<p><em>This is a dynamic document, generated by <a href="https://yihui.name/knitr">knitr</a> using <a href="https://github.com/ropensci/EML/blob/master/inst/doc/vingettes/README.Rmd">vignette.Rmd</a> as the source.</em></p>
<h1 id="installation">Installation</h1>
<p>Install the R package:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;devtools&quot;</span>)
<span class="kw">install_github</span>(<span class="st">&quot;EML&quot;</span>, <span class="st">&quot;ropensci&quot;</span>)</code></pre>
<p>While the dependencies for basic functionality are kept to a minimum, to access all the functions and tests implemented in <code>EML</code> you’ll need several additional packages from CRAN.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;knitr&quot;</span>, <span class="st">&quot;rfigshare&quot;</span>, <span class="st">&quot;testthat&quot;</span>, <span class="st">&quot;RCurl&quot;</span>, <span class="st">&quot;dataone&quot;</span>, <span class="st">&quot;rrdf&quot;</span>))</code></pre>
<p>Load the package:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;EML&quot;</span>)</code></pre>
<h1 id="usage">Usage</h1>
<h2 id="writing-r-data-into-eml">Writing R data into EML</h2>
<p><code>EML</code> now extends R’s <code>data.frame</code> class by introducing the <code>data.set</code> class which includes additional metadata required by EML. A <code>data.set</code> can be created much like a <code>data.frame</code> by specifying additional arguments</p>
<pre class="sourceCode r"><code class="sourceCode r">dat =<span class="st"> </span><span class="kw">data.set</span>(<span class="dt">river =</span> <span class="kw">c</span>(<span class="st">&quot;SAC&quot;</span>,  <span class="st">&quot;SAC&quot;</span>,   <span class="st">&quot;AM&quot;</span>),
               <span class="dt">spp   =</span> <span class="kw">c</span>(<span class="st">&quot;king&quot;</span>,  <span class="st">&quot;king&quot;</span>, <span class="st">&quot;ccho&quot;</span>),
               <span class="dt">stg   =</span> <span class="kw">c</span>(<span class="st">&quot;smolt&quot;</span>, <span class="st">&quot;parr&quot;</span>, <span class="st">&quot;smolt&quot;</span>),
               <span class="dt">ct    =</span> <span class="kw">c</span>(293L,    410L,    210L),
               <span class="dt">col.defs =</span> <span class="kw">c</span>(<span class="st">&quot;River site used for collection&quot;</span>,
                            <span class="st">&quot;Species common name&quot;</span>,
                            <span class="st">&quot;Life Stage&quot;</span>,
                            <span class="st">&quot;count of live fish in traps&quot;</span>),
               <span class="dt">unit.defs =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="dt">SAC =</span> <span class="st">&quot;The Sacramento River&quot;</span>,
                                  <span class="dt">AM =</span> <span class="st">&quot;The American River&quot;</span>),
                                <span class="kw">c</span>(<span class="dt">king =</span> <span class="st">&quot;King Salmon&quot;</span>,
                                  <span class="dt">ccho =</span> <span class="st">&quot;Coho Salmon&quot;</span>),
                                <span class="kw">c</span>(<span class="dt">parr =</span> <span class="st">&quot;third life stage&quot;</span>,
                                  <span class="dt">smolt =</span> <span class="st">&quot;fourth life stage&quot;</span>),
                                <span class="st">&quot;number&quot;</span>))</code></pre>
<ul>
<li><p><code>col.defs</code>: These are usually just plain text definitions, though a URI to a semantic definition can be particularly powerful. See “Advanced Use” for details on adding richer information, such as the method used to collect the data or set the geographic, taxanomic, or temporal coverage of an individual column.</p></li>
<li><p><code>unit.defs</code>: For factors, this is a definition of the levels involved. For numeric data, specify the units from <a href="https://knb.ecoinformatics.org/software/eml/eml-2.1.1/eml-unitTypeDefinitions.html#StandardUnitDictionary">this list</a>. For dates, specify the format, (e.g. YYYY or MM-DD-YY). For character strings, a definition of the kind of string can be given, (e.g. species scientific name), otherwise the column description will be used.</p></li>
</ul>
<p>Alternatively, annotations can be added to an existing data frame, <code>data.set(my.data.frame, col.defs = ..., unit.defs = ...)</code>.</p>
<p>We will also specify a default creator who will also be used as the contact person for EML files created in this session.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">eml_config</span>(<span class="dt">creator=</span><span class="st">&quot;Carl Boettiger &lt;cboettig@gmail.com&gt;&quot;</span>)</code></pre>
<p>While we will always be able to provide alternative or additional creators or contact person later, <code>eml_config</code> can store the defaults to save us the trouble of entering this data repeatedly. See <code>?eml_config</code> for more information and other configurable defaults.</p>
<p>With this information in place, we have all the required metadata to generate a minimally valid EML file documenting this dataset.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">eml_write</span>(dat, <span class="dt">file =</span> <span class="st">&quot;EML_example.xml&quot;</span>)</code></pre>
<pre><code>[1] &quot;EML_example.xml&quot;</code></pre>
<p><em>for convenience, had we ommitted any essential metadata, such as providing only an unannotated <code>data.frame</code> in place of a <code>data.set</code>, <code>EML</code> will launch its metadata wizard to assist in constructing the metadata based on the data.frame provided</em>. While this may be helpful starting out, regular users will find it faster to define the columns and units directly in the format above.</p>
<p>See the <a href="https://github.com/ropensci/EML/tree/master/inst/doc/EML_example.xml">EML generated</a> by this example.</p>
<p>We can validate the resulting document to check that no required fields are missing and that no entry has been incorrectly formatted. This ensures that other software can correctly parse and interpret the metadata document:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">eml_validate</span>(<span class="st">&quot;EML_example.xml&quot;</span>)</code></pre>
<pre><code>EML specific tests XML specific tests
              TRUE               TRUE</code></pre>
<ul>
<li>See <a href="https://github.com/ropensci/EML/issues?labels=write+eml&amp;page=1&amp;state=open">Open issues in writing EML</a></li>
</ul>
<h2 id="publish-eml">Publish EML</h2>
<p>Once we have generated a basic EML file, we can publish it to a variety of academic repositories where it will be indexed, permenently archived, more easily citable, and publicly discoverable.</p>
<h3 id="publishing-to-figshare">Publishing to figshare</h3>
<p>In this example, we will publish the above EML to <a href="https://figshare.com">figshare</a> using the <a href="https://github.com/ropensci/rfigshare">rfigshare</a> package. Like most academic repostories, figshare requires some basic metadata for any entry. Much of this we can automatically extract from our existing EML file. Additional metadata unique to figshare (e.g. matching it’s allowed “categories” can also be provided.</p>
<p><em>Note: this example assumes <code>rfigshare</code> is installed, even though it is not required to use EML and run the examples in the other sections. See the <code>rfigshare</code> documentation for authenticating <code>rfigshare</code> with your user account</em></p>
<!-- We don't want to generate a DOI every time we run the vignette -->


<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">eml_publish</span>(<span class="st">&quot;EML_example.xml&quot;</span>,
            <span class="dt">description=</span><span class="st">&quot;Example EML file from EML&quot;</span>,
            <span class="dt">categories =</span> <span class="st">&quot;Ecology&quot;</span>,
            <span class="dt">tags =</span> <span class="st">&quot;EML&quot;</span>,
            <span class="dt">destination=</span><span class="st">&quot;figshare&quot;</span>)</code></pre>
<pre><code>[1] 1004892</code></pre>
<p>This creates a draft file visible only to the user configured in <code>rfigshare</code>. The document can be made (permanently) public using either the figshare web interface, the <code>rfigshare</code> package (using <code>fs_make_public(id)</code>) or just by adding the argument <code>visibility = TRUE</code> to the above <code>eml_publish</code> command.</p>
<h4 id="in-development">In development</h4>
<p>See <a href="https://github.com/ropensci/EML/issues?labels=publish+eml&amp;page=1&amp;state=open">Open issues in publishing EML</a></p>
<h2 id="parsing-and-exploring-an-eml-file">Parsing and exploring an EML file</h2>
<p>Users will not only want to generate EML files, but also take advantage of the wealth of data already well documented in EML. The package provides many tools to facilitate the extraction of data from EML files into their native R formats, as well as utilities to access and manipulate the metadata provided. By having these tools avialble in the scripted R environment, it becomes possible to write functions that can be easily applied across large collections of files. In this way, researchers can scale their analyses across ever larger collections of datasets by automating the more tedious aspects of data discovery and integration.</p>
<pre class="sourceCode r"><code class="sourceCode r">obj &lt;-<span class="st"> </span><span class="kw">eml_read</span>(<span class="st">&quot;EML_example.xml&quot;</span>)</code></pre>
<p>We can also read in a remote file by providing a URL or KNB object identifier (such as a DOI).</p>
<p>The <code>eml_get</code> function provides us with easy access to many of the component elements of the metadata file. See the documentation for a complete list.</p>
<pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw">eml_get</span>(obj, <span class="st">&quot;data.set&quot;</span>)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">eml_get</span>(obj, <span class="st">&quot;contact&quot;</span>)</code></pre>
<pre><code>[1] &quot;Carl Boettiger &lt;cboettig@gmail.com&gt;&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">eml_get</span>(obj, <span class="st">&quot;citation_info&quot;</span>)</code></pre>
<pre><code>Boettiger C (2014-04-18). _metadata_.</code></pre>
<h2 id="advanced-writing-of-eml">Advanced writing of EML</h2>
<p><strong>IN PROGRESS</strong></p>
<p>Our minimal EML file barely scratches the surface of what is possible to do with EML. In <a href="https://github.com/ropensci/EML/blob/master/inst/doc/vignettes/Advanced_writing_of_EML.md">Advanced writing of EML</a>, we construct a much richer EML file, including:</p>
<ul>
<li>Constructing more complete lists of authors, publishers and contact.</li>
<li>Summarizing the geographic, temporal, and taxonomic coverage of the dataset</li>
<li>Reading in pages of methods descriptions from a Word document</li>
<li>Adding arbitrary additional metadata</li>
<li>Indicating the canonical citation to the paper that should be acknowledged when the data is re-used.</li>
<li>Conversion between EML and other metadata formats, such as NCBII and ISO standards.</li>
</ul>
<p>In so doing we will take a more modular approach that will allow us to build up our metadata from reusable components, while also providing a more fine-grained control over the resulting output fields and files.</p>
<h2 id="advanced-parsing-and-manipulation-of-eml">Advanced parsing and manipulation of EML</h2>
<p><strong>IN PROGRESS</strong></p>
<p>In <a href="https://github.com/ropensci/EML/blob/master/inst/doc/vignettes/Advanced_parsing_of_EML.md">Advanced parsing and manipulation of EML</a>, we</p>
<ul>
<li>Introduce how to access any EML element in R using the S4 subsetting mechanism</li>
<li>Demonstrate how to extract and manipulate semantic RDF triples from EML metadata</li>
<li>Illustrate how EML metadata extraction can be applied across a collection of files</li>
<li>Illustrate how EML manipulation can be combined with queries across even larger distributed collections of EML data over the dataone network</li>
<li>Demonstrate merging of multiple datasets based on semantics</li>
</ul>
<h2 id="testing-and-development">Testing and development</h2>
<p>The advanced vignettes include some cutting edge functionality that depends on additional packages are not yet on CRAN and may not be stable. To take advantage of these functions when indicated in the tutorial, consider installing the following packages:</p>
<!-- Not working
```r
install_github("Sxslt", "omegahat")
install_github("XMLSchema", "omegahat")
install_github("RHTMLForms", "omegahat")
```
-->



<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;devtools&quot;</span>)
<span class="kw">install_github</span>(<span class="st">&quot;RWordXML&quot;</span>, <span class="st">&quot;duncantl&quot;</span>)
<span class="kw">install.packages</span>(<span class="st">&quot;Sxslt&quot;</span>, <span class="dt">repos=</span><span class="st">&quot;https://www.omegahat.org/R&quot;</span>, <span class="dt">type=</span><span class="st">&quot;source&quot;</span>)
<span class="kw">install.packages</span>(<span class="st">&quot;RHTMLForms&quot;</span>, <span class="dt">repos=</span><span class="st">&quot;https://www.omegahat.org/R&quot;</span>, <span class="dt">type=</span><span class="st">&quot;source&quot;</span>)
<span class="kw">install.packages</span>(<span class="st">&quot;XMLSchema&quot;</span>, <span class="dt">repos=</span><span class="st">&quot;https://www.omegahat.org/R&quot;</span>, <span class="dt">type=</span><span class="st">&quot;source&quot;</span>)</code></pre>
<p>Successful installation of these packages will require the <code>devtools</code> package (for <code>install_github</code>) and the ability to build packages from source.</p>
<h1 id="license">License</h1>
<p>See <a href="https://github.com/ropensci/EML/blob/master/LICENSE">LICENSE</a></p>
<h1 id="support">Support</h1>
<p><strong><em>Suggestions, feature requests, bug reports, pull requests and other feedback welcome!</em></strong> Please see our <a href="https://github.com/ropensci/EML/issues">issues tracker</a></p>
<p>Interested in contributing to the package? Want to know more about how the project is organized? Please see our <a href="https://github.com/ropensci/EML/blob/master/CONTRIBUTING.md">contributing</a> guidelines.</p>

    </article>
  </div>
</div>



      <footer class="footer">

<!--************** FOAF information to social networks ***************************** -->
  <div class="row">
    <div class="col-md-3 col-xs-4 socialicons" style="font-size:20px" typeof="foaf:Person" about="https://www.carlboettiger.info#me">
      <p>
          <script type="text/javascript" src="/assets/js/obfuscate-email-link.js"></script> 

          <a rel="foaf:account" href="https://twitter.com/cboettig" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Twitter'); 
             return false;"><span class="showtooltip" title="follow me on twitter (reading, discussing)"><i class="fa fa-twitter"></i></span></a> 

          <a rel="foaf:account" href="https://github.com/cboettig" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Github'); 
             return false;"><span class="showtooltip" title="follow me on Github (code, research)"><i class="fa fa-github"></i></span></a>
      <!--
          <a rel="foaf:account" href="https://plus.google.com/" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'GPlus'); 
             return false;"><i class="fa fa-google-plus"></i></a>

          <a rel="foaf:account" href="https://www.mendeley.com/profiles/carl-boettiger" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Mendeley'); 
             return false;"><img src="/assets/img/icon-mendeley.png" /></a> 

           citations on google-scholar

           stackoverflow
      -->
      <a rel="foaf:weblog" type="application/atom+xml" href="/blog.xml"  
         class="showtooltip" title="RSS feeds for my blog-style entries. See the feed on my lab notebook (/atom.xml) to follow all entries instead." 
         onclick="recordOutboundLink(this, 'Outbound Links', 'RSS'); 
         return false;"><i class="fa fa-rss"></i></a>
       </p>
    </div>

    
    <!--**************** End social links **************************** -->


    <div class="col-md-4 col-md-offset-1 col-xs-4">
      <p><a onclick="recordOutboundLink(this, 'Outbound Links', 'ONS_claim'); return false;" href="https://onsclaims.wikispaces.com/"><img src="/assets/img/ons-aci2-icon.svg" alt="ONS" class="showtooltip" title="An Open Notebook Science (ONS) project claim: Entry provides all content (AC) immediately (I) or without significant delay.  See link for details"/></a></p>
    </div>


    <div class="col-md-3 col-md-offset-1 col-xs-4">
      <p>
      <a rel="license" property="https://creativecommons.org/ns#license" href="https://creativecommons.org/publicdomain/zero/1.0/" onclick="recordOutboundLink(this, 'Outbound Links', 'CC0'); return false;"><img src="/assets/img/cc-zero.svg" alt="CC0"/></a> 
      </p>
    </div>
  </div>


  
<!-- COinS metadata (for citation managers like Zotero etc), goes in body text -->
  <span
      class="Z3988" 
      title="ctx_ver=Z39.88-2004
      &amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc
      &amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator
      &amp;rft.title=
      &amp;rft.creator=Carl Boettiger
      &amp;rft.date=
      &amp;rft.language=EN
      &amp;rft.rights=CC0
      &amp;rft_id=https://www.carlboettiger.info/software/EML.html">
  </span>


</footer>




          <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <!-- JQuery, used on a few pages (still?) -->
    <!-- <script type="text/javascript" src="/assets/js/jquery.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Equations using MathJax -->
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "all"} } });       </script>
    <!-- Twitter Bootstrap Javascript -->
    <!--  <script src="/assets/js/bootstrap.min.js"></script> -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>


    

        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-18401403-1']);
          _gaq.push(['_trackPageview']);
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
  </script>



<script type="text/javascript">
function recordOutboundLink(link, category, action) {
  try {
    var pageTracker=_gat._getTracker("UA-18401403-1");
    pageTracker._trackEvent(category, action);
    setTimeout('document.location = "' + link.href + '"', 100)
  }catch(err){}
}
</script>




    </div>
  </body>
</html>
   
