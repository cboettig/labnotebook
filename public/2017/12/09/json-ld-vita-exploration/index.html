<!doctype html>
<html lang="en">
  <head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />

  <meta name="author" content="Carl Boettiger">
  

  <title>Boettiger Group</title>

	<link rel="apple-touch-icon" sizes="76x76" href="../../../../img/favicon.png" />
	<link rel="icon" type="image/png" href="../../../../img/favicon.png" />

  
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
  
  
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />

  
  
  <link href="../../../../sass/material-kit.min.21f13fde0d781988db0cfadedecf234226e39c5e41fcba71bc40d79e4b699153.css" rel="stylesheet">

  
  <link rel="stylesheet" href="https://cdn.rawgit.com/gaborcsardi/r-font/master/rlogo.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.0/css/academicons.min.css">
  <link rel="stylesheet" href="../../../../highlight/styles/tomorrow-night.css">

  
  <link rel="stylesheet" href="../../../../css/cboettig.css">
  
    
  <link rel="feed" href="" type="application/rss+xml" title="Boettiger Group">
  <link rel="canonical" href="../../../../2017/12/09/json-ld-vita-exploration/">


  <script src="../../../../js/core/jquery.min.js" type="text/javascript"></script>
  

</head>

  <body class="profile-page sidebar-collapse"> 
  <nav class="navbar navbar-transparent navbar-color-on-scroll fixed-top navbar-expand-lg" color-on-scroll="100" id="sectionsNav">
    <div class="container">
      <div class="navbar-translate">
        <a class="navbar-brand" href=" /">
          Boettiger Group </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="sr-only">Toggle navigation</span>
          <span class="navbar-toggler-icon"></span>
          <span class="navbar-toggler-icon"></span>
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav ml-auto">
          
          <li class="nav-item">
            <a class="nav-link"
               href="../../../../index.html"
                
               title = "Home"><i class='material-icons'>home</i> Home</a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link"
               href="../../../../members"
                
               title = "Members"><i class='material-icons'>people</i> Members</a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link"
               href="../../../../pubs"
                
               title = "Publications"><i class='material-icons'>book</i> Publications</a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link"
               href="../../../../teaching"
                
               title = "Teaching"><i class='material-icons'>school</i> Teaching</a>
          </li>
          
        </ul>
      </div>
    </div>
</nav>
  
  
<div class="page-header header-filter clear-filter blue-filter" 
       data-parallax="true" 
       style="background-image: url('/img/methane_bubbles.jpg');">
    <div class="container">
      <div class="row">
        <div class="col-md-8 ml-auto mr-auto">
          <div class="brand">
            <h1>JSON-LD Vita exploration</h1>
            <h3></h3>
            
              
          </div>
        </div>
      </div>
    </div>
</div>

  
  
<div class="main main-raised">
  <div class="section section-basic">
    <div class="container">
      <div class="row">
        <div class="col-md-7 ml-auto mr-auto">
          <article>
          


<div id="using-json-queries-jq" class="section level1">
<h1>Using JSON Queries (JQ)</h1>
<div id="pure-json" class="section level2">
<h2>Pure JSON</h2>
<pre class="r"><code>vita &lt;- readr::read_file(&quot;../../static/js/vita.json&quot;)

jq(vita, &#39;.&quot;@reverse&quot;.author[]  | 
   { year: .dateCreated, 
     author: .author[] | [.givenName, .familyName]  | join(&quot; &quot;)
   }&#39;) %&gt;% combine() %&gt;% fromJSON()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">year</th>
<th align="left">author</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">Wayne M. Getz</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Charles R. Marshall</td>
</tr>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">Colin J. Carlson</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Luca Giuggioli</td>
</tr>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">Sadie J. Ryan</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Stephanie S. Romañach</td>
</tr>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Samuel D. Chamberlain</td>
</tr>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">Laurel Larsen</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Paolo D’Odorico</td>
</tr>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">David O’Sullivan</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Stephanie E. Hampton</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Matthew B. Jones</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Leah A. Wasser</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Mark P. Schildhauer</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Sarah R. Supp</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Julien Brun</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Rebecca R. Hernandez</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Scott L. Collins</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Louis J. Gross</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Denny S. Fernández</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Amber Budden</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Ethan P. White</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Tracy K. Teal</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Stephanie G. Labou</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Juliann E. Aukema</td>
</tr>
<tr class="even">
<td align="left">2016-8-19</td>
<td align="left">T. Alex Perkins</td>
</tr>
<tr class="odd">
<td align="left">2016-8-19</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2016-8-19</td>
<td align="left">Benjamin L. Phillips</td>
</tr>
<tr class="odd">
<td align="left">2016-5-6</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2016-5-6</td>
<td align="left">Michael Bode</td>
</tr>
<tr class="odd">
<td align="left">2016-5-6</td>
<td align="left">James N. Sanchirico</td>
</tr>
<tr class="even">
<td align="left">2016-5-6</td>
<td align="left">Jacob LaRiviere</td>
</tr>
<tr class="odd">
<td align="left">2016-5-6</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="even">
<td align="left">2016-5-6</td>
<td align="left">Paul R. Armsworth</td>
</tr>
<tr class="odd">
<td align="left">2015-11-16</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2015-11-16</td>
<td align="left">Scott Chamberlain</td>
</tr>
<tr class="odd">
<td align="left">2015-11-16</td>
<td align="left">Ted Harte</td>
</tr>
<tr class="even">
<td align="left">2015-11-16</td>
<td align="left">Karthik Ram</td>
</tr>
<tr class="odd">
<td align="left">2015-9-3</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2015-9-3</td>
<td align="left">Scott Chamberlain</td>
</tr>
<tr class="odd">
<td align="left">2015-9-3</td>
<td align="left">Rutger Vos</td>
</tr>
<tr class="even">
<td align="left">2015-9-3</td>
<td align="left">Hilmar Lapp</td>
</tr>
<tr class="odd">
<td align="left">2015-1-28</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2015-1-7</td>
<td align="left">Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2015-1-7</td>
<td align="left">M. Mangel</td>
</tr>
<tr class="even">
<td align="left">2015-1-7</td>
<td align="left">S. Munch</td>
</tr>
<tr class="odd">
<td align="left">2013-7-10</td>
<td align="left">Boettiger</td>
</tr>
<tr class="even">
<td align="left">2013-7-10</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="odd">
<td align="left">2013-6-20</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2013-6-20</td>
<td align="left">Noam Ross</td>
</tr>
<tr class="odd">
<td align="left">2013-6-20</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="even">
<td align="left">2013-01-08</td>
<td align="left">Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2013-01-08</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="even">
<td align="left">2012-10-10</td>
<td align="left">Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2012-10-10</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="even">
<td align="left">2012-11-6</td>
<td align="left">Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2012-11-6</td>
<td align="left">D. T. Lang</td>
</tr>
<tr class="even">
<td align="left">2012-11-6</td>
<td align="left">P. C. Wainwright</td>
</tr>
<tr class="odd">
<td align="left">2012-10-11</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2012-10-11</td>
<td align="left">Duncan Temple Lang</td>
</tr>
<tr class="odd">
<td align="left">2012-5-16</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">2012-5-16</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="odd">
<td align="left">2012-3-13</td>
<td align="left">Jeremy M. Beaulieu</td>
</tr>
<tr class="even">
<td align="left">2012-3-13</td>
<td align="left">Dwueng-Chwuan Jhwueng</td>
</tr>
<tr class="odd">
<td align="left">2012-3-13</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">2012-3-13</td>
<td align="left">Brian C. O’Meara</td>
</tr>
<tr class="odd">
<td align="left">2012-2-19</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2012-2-19</td>
<td align="left">Graham Coop</td>
</tr>
<tr class="odd">
<td align="left">2012-2-19</td>
<td align="left">Peter Ralph</td>
</tr>
<tr class="even">
<td align="left">2009-10-19</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2009-10-19</td>
<td align="left">Jonathan Dushoff</td>
</tr>
<tr class="even">
<td align="left">2009-10-19</td>
<td align="left">Joshua S. Weitz</td>
</tr>
<tr class="odd">
<td align="left">2006-11-27</td>
<td align="left">James J. Wray</td>
</tr>
<tr class="even">
<td align="left">2006-11-27</td>
<td align="left">Neta A. Bahcall</td>
</tr>
<tr class="odd">
<td align="left">2006-11-27</td>
<td align="left">Paul Bode</td>
</tr>
<tr class="even">
<td align="left">2006-11-27</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2006-11-27</td>
<td align="left">Philip F. Hopkins</td>
</tr>
</tbody>
</table>
<div id="with-json-ld-frame" class="section level3">
<h3>With JSON-LD frame</h3>
<p>By first constructing a frame, we can get back a subset of the data we are interested in. This is not as powerful as a graph query, but still has aspects of schema-on-read.</p>
<pre class="r"><code>frame &lt;-
&#39;{
&quot;@context&quot;: &quot;http://schema.org&quot;,
&quot;@type&quot;: &quot;ScholarlyArticle&quot;,
&quot;author&quot;: {
  &quot;@type&quot;: &quot;Person&quot;,
  &quot;givenName&quot;: {},
  &quot;familyName&quot;: {},
  &quot;@explicit&quot;: true
},
&quot;dateCreated&quot;: {},
&quot;@explicit&quot;: true
}&#39;


vita &lt;- jsonld::jsonld_frame(&quot;../../static/js/vita.json&quot;, frame)</code></pre>
<pre class="r"><code>as.character(vita) %&gt;% 
  jq(&#39;.&quot;@graph&quot;[] | { 
     year: .dateCreated, 
     author: .author[] | [.givenName, .familyName] | join(&quot; &quot;)    
     }&#39;) %&gt;% combine() %&gt;% fromJSON()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">year</th>
<th align="left">author</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">Wayne M. Getz</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Charles R. Marshall</td>
</tr>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">Colin J. Carlson</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Luca Giuggioli</td>
</tr>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">Sadie J. Ryan</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Stephanie S. Romañach</td>
</tr>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Samuel D. Chamberlain</td>
</tr>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">Laurel Larsen</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Paolo D’Odorico</td>
</tr>
<tr class="odd">
<td align="left">2017-12-09</td>
<td align="left">David O’Sullivan</td>
</tr>
<tr class="even">
<td align="left">2017-12-09</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2016-8-19</td>
<td align="left">T. Alex Perkins</td>
</tr>
<tr class="even">
<td align="left">2016-8-19</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2016-8-19</td>
<td align="left">Benjamin L. Phillips</td>
</tr>
<tr class="even">
<td align="left">2013-6-20</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2013-6-20</td>
<td align="left">Noam Ross</td>
</tr>
<tr class="even">
<td align="left">2013-6-20</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="odd">
<td align="left">2009-10-19</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2009-10-19</td>
<td align="left">Jonathan Dushoff</td>
</tr>
<tr class="odd">
<td align="left">2009-10-19</td>
<td align="left">Joshua S. Weitz</td>
</tr>
<tr class="even">
<td align="left">2013-01-08</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2013-01-08</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="even">
<td align="left">2006-11-27</td>
<td align="left">James J. Wray</td>
</tr>
<tr class="odd">
<td align="left">2006-11-27</td>
<td align="left">Neta A. Bahcall</td>
</tr>
<tr class="even">
<td align="left">2006-11-27</td>
<td align="left">Paul Bode</td>
</tr>
<tr class="odd">
<td align="left">2006-11-27</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2006-11-27</td>
<td align="left">Philip F. Hopkins</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Stephanie E. Hampton</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Matthew B. Jones</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Leah A. Wasser</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Mark P. Schildhauer</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Sarah R. Supp</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Julien Brun</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Rebecca R. Hernandez</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Scott L. Collins</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Louis J. Gross</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Denny S. Fernández</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Amber Budden</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Ethan P. White</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Tracy K. Teal</td>
</tr>
<tr class="odd">
<td align="left">2017-03-15</td>
<td align="left">Stephanie G. Labou</td>
</tr>
<tr class="even">
<td align="left">2017-03-15</td>
<td align="left">Juliann E. Aukema</td>
</tr>
<tr class="odd">
<td align="left">2012-5-16</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2012-5-16</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="odd">
<td align="left">2012-10-10</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2012-10-10</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="odd">
<td align="left">2013-7-10</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2013-7-10</td>
<td align="left">Alan Hastings</td>
</tr>
<tr class="odd">
<td align="left">2015-1-7</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2015-1-7</td>
<td align="left">M. Mangel</td>
</tr>
<tr class="odd">
<td align="left">2015-1-7</td>
<td align="left">S. Munch</td>
</tr>
<tr class="even">
<td align="left">2015-9-3</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2015-9-3</td>
<td align="left">Scott Chamberlain</td>
</tr>
<tr class="even">
<td align="left">2015-9-3</td>
<td align="left">Rutger Vos</td>
</tr>
<tr class="odd">
<td align="left">2015-9-3</td>
<td align="left">Hilmar Lapp</td>
</tr>
<tr class="even">
<td align="left">2012-11-6</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2012-11-6</td>
<td align="left">D. T. Lang</td>
</tr>
<tr class="even">
<td align="left">2012-11-6</td>
<td align="left">P. C. Wainwright</td>
</tr>
<tr class="odd">
<td align="left">2012-2-19</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="even">
<td align="left">2012-2-19</td>
<td align="left">Graham Coop</td>
</tr>
<tr class="odd">
<td align="left">2012-2-19</td>
<td align="left">Peter Ralph</td>
</tr>
<tr class="even">
<td align="left">2012-3-13</td>
<td align="left">Jeremy M. Beaulieu</td>
</tr>
<tr class="odd">
<td align="left">2012-3-13</td>
<td align="left">Dwueng-Chwuan Jhwueng</td>
</tr>
<tr class="even">
<td align="left">2012-3-13</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2012-3-13</td>
<td align="left">Brian C. O’Meara</td>
</tr>
<tr class="even">
<td align="left">2012-10-11</td>
<td align="left">Carl Boettiger</td>
</tr>
<tr class="odd">
<td align="left">2012-10-11</td>
<td align="left">Duncan Temple Lang</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="sparql-and-rdf" class="section level1">
<h1>SPARQL and RDF</h1>
<p>A simple example</p>
<pre class="r"><code>&quot;http://dx.doi.org/10.1002/ece3.2314&quot; %&gt;%
  httr::GET(httr::add_headers(Accept=&quot;application/rdf+xml&quot;)) %&gt;%
  httr::content(as = &quot;parsed&quot;, type = &quot;application/xml&quot;) %&gt;%
  xml2::write_xml(&quot;ex.xml&quot;)</code></pre>
<p>Our <code>rdflib</code> functions perform the simple task of parsing this <code>rdfxml</code> file into R (as a <code>redland</code> <code>rdf</code> class object) and then writing it back out in <code>jsonld</code> serialization:</p>
<pre class="r"><code>rdf_parse(&quot;ex.xml&quot;, &quot;rdfxml&quot;) %&gt;% 
  rdf_serialize(&quot;ex.json&quot;, &quot;jsonld&quot;)</code></pre>
<p>and we now have JSON file. We can clean this file up a bit by replacing the long URIs with short prefixes by “compacting” the file into a specific JSON-LD context. FOAF, OWL, and Dublin Core are all recognized by schema.org, so we need not declare them at all here. PRISM and BIBO ontologies are not, so we simply declare them as additional prefixes:</p>
<pre class="r"><code>context &lt;- 
&#39;{ &quot;@context&quot;: [
    &quot;http://schema.org&quot;,
  {
    &quot;prism&quot;: &quot;http://prismstandard.org/namespaces/basic/2.1/&quot;,
    &quot;bibo&quot;: &quot;http://purl.org/ontology/bibo/&quot;
  }]
}&#39;
json &lt;- jsonld_compact(&quot;ex.json&quot;, context)</code></pre>
<div id="switching-contexts-and-framing" class="section level2">
<h2>Switching contexts and framing</h2>
<pre class="r"><code>context &lt;- 
 &#39;{
    &quot;prism&quot;: &quot;http://prismstandard.org/namespaces/basic/2.1/&quot;,
    &quot;dc&quot;: &quot;http://purl.org/dc/terms/&quot;,
    &quot;bibo&quot;: &quot;http://purl.org/ontology/bibo/&quot;,
    &quot;foaf&quot;: &quot;http://xmlns.com/foaf/0.1/&quot;,
    &quot;owl&quot;: &quot;http://www.w3.org/2002/07/owl#&quot;,
    &quot;schema&quot;: &quot;http://schema.org/&quot;,

    &quot;schema:pageStart&quot;: &quot;prism:startingPage&quot;, 
    &quot;schema:pageEnd&quot;: &quot;prism:endingPage&quot;,
    &quot;schema:volumeNumber&quot;: &quot;prism:volume&quot;,
    &quot;schema:identifier&quot;: {&quot;@id&quot;: &quot;prism:issn&quot;, &quot;@type&quot;: &quot;@id&quot;},

    &quot;schema:Periodical&quot;: &quot;bibo:Journal&quot;,

    &quot;schema:author&quot;: &quot;dc:creator&quot;,
    &quot;schema:isPartOf&quot;: &quot;dc:isPartOf&quot;,
    &quot;schema:publisher&quot;: &quot;dc:publisher&quot;,
    &quot;schema:name&quot;: &quot;dc:title&quot;,

    &quot;schema:familyName&quot;: &quot;foaf:familyName&quot;,
    &quot;schema:givenName&quot;: &quot;foaf:givenName&quot;,
    &quot;schema:Person&quot;: &quot;foaf:Person&quot;,

    &quot;schema:sameAs&quot;: {&quot;@id&quot;: &quot;owl:sameAs&quot;, &quot;@type&quot;: &quot;@id&quot;},
    &quot;schema:Date&quot;: &quot;xsd:date&quot;,
    &quot;schema:datePublished&quot;: {&quot;@id&quot;: &quot;http://purl.org/dc/terms/date&quot;, &quot;@type&quot;: &quot;schema:Date&quot;}
}&#39;</code></pre>
<p>Compact raw JSON into this context</p>
<pre class="r"><code>jsonld_compact(&quot;ex.json&quot;, context) %&gt;% 
  fromJSON(simplifyVector = FALSE) -&gt; X</code></pre>
<p>Now replace that context with schema.org context, a bit of a hack</p>
<pre class="r"><code>X[[&quot;@context&quot;]] &lt;- &quot;http://schema.org&quot;
X %&gt;% 
  toJSON(auto_unbox = TRUE, pretty = TRUE) %&gt;% 
  jsonld_compact(&quot;http://schema.org&quot;) -&gt; Y</code></pre>
<p>Now frame our desired results to explicitly include only the elements we request, giving the graph in the desired tree structure:</p>
<pre class="r"><code>frame &lt;- 
&#39;{&quot;@context&quot;: &quot;http://schema.org&quot;,
 &quot;@graph&quot;: {
   &quot;id&quot;: {},
   &quot;name&quot;: {},
   &quot;pageStart&quot;: {},
    &quot;pageEnd&quot;: {},
    &quot;isPartOf&quot;: {
      &quot;name&quot;: {},
      &quot;identifier&quot;: {},
      &quot;@explicit&quot;: true
    },
    &quot;author&quot;: [
            {
              &quot;givenName&quot;: {},
              &quot;familyName&quot;: {},
              &quot;@explicit&quot;: true
            }],
   &quot;@explicit&quot;: true
 }
}&#39;

jsonld_frame(Y, frame)</code></pre>
<pre><code>## {
##   &quot;@context&quot;: &quot;http://schema.org&quot;,
##   &quot;@graph&quot;: [
##     {
##       &quot;id&quot;: &quot;http://dx.doi.org/10.1002/ece3.2314&quot;,
##       &quot;author&quot;: [
##         {
##           &quot;id&quot;: &quot;http://id.crossref.org/contributor/carl-boettiger-2etprmps2zm1a&quot;,
##           &quot;type&quot;: &quot;Person&quot;,
##           &quot;familyName&quot;: &quot;Boettiger&quot;,
##           &quot;givenName&quot;: &quot;Carl&quot;
##         },
##         {
##           &quot;id&quot;: &quot;http://id.crossref.org/contributor/t-alex-perkins-2etprmps2zm1a&quot;,
##           &quot;type&quot;: &quot;Person&quot;,
##           &quot;familyName&quot;: &quot;Perkins&quot;,
##           &quot;givenName&quot;: &quot;T. Alex&quot;
##         },
##         {
##           &quot;id&quot;: &quot;http://id.crossref.org/contributor/benjamin-l-phillips-2etprmps2zm1a&quot;,
##           &quot;type&quot;: &quot;Person&quot;,
##           &quot;familyName&quot;: &quot;Phillips&quot;,
##           &quot;givenName&quot;: &quot;Benjamin L.&quot;
##         }
##       ],
##       &quot;isPartOf&quot;: null,
##       &quot;name&quot;: &quot;After the games are over: life-history trade-offs drive dispersal attenuation following range expansion&quot;,
##       &quot;pageEnd&quot;: &quot;6434&quot;,
##       &quot;pageStart&quot;: &quot;6425&quot;
##     }
##   ]
## }</code></pre>
<p>Note that the RDF has different semantic models than schema.org: for instance, <code>volume</code> is a property of the scholarly article (well, it’s untyped in the RDF, but it’s a property of the object described by the article DOI), while in schema.org, <code>volumeNumber</code> is a property of a <code>Periodical</code> (or <code>PublicationVolume</code>), which <code>hasPart</code>s made up of <code>PublicationIssue</code> objects, themselves <code>hasPart</code>s made up of <code>ScholarlyArticle</code>s. The whole purpose of JSON-LD functions are to respect semantics, therefore there is no way we can use JSON-LD operations to alter these semantics.</p>
<p>As long as we aren’t changing the object structures though, we can change the vocabulary. This is really also something of a hack: we compact the original data, and then just chop off the <code>@context</code> and provide our own <code>@context</code> that gives schema.org definitions to the terms.</p>
<p>JSON-LD is commonly used to change key names, but this assumes that both contexts can be defined relative to the same URIs. e.g. we can say that in the context of Dublin Core, implicitly <code>&quot;title&quot;: &quot;http://schema.org/name&quot;, or explicitly:</code>“<a href="https://purl.org/dc/title" class="uri">https://purl.org/dc/title</a>”: “<a href="http://schema.org/name" class="uri">http://schema.org/name</a>”`.</p>
<p>Perhaps this ought instead to be done with an ontological operation and the assertion of <code>sameAs</code> and similar relationships. Perhaps that would also permit moving between these different levels?</p>
<p>Note that items with specific types must be declared as such to match types expected in schema.org. Others can be captured as schema.org terms just by setting the default <code>@vocab</code>.</p>
</div>
</div>

          </article>
        </div>
        <div class="col-md-4">
          <div class="sidebar">
            <aside prefix="og:http://ogp.me/ns/article#">
  
  
  
<div class="article-metadata">

  <p>
  <span class="article-date">
    <i class="fa fa-calendar"></i>
    
    <time datetime="2017-12-09 00:00:00 &#43;0000 UTC" itemprop="datePublished">
      Sat, Dec 9, 2017
    </time>
    
  </span>
  </p>
    

  <p>
  
  
  
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="../../../../categories/r">R</a
    >
    
  </span>
  
  
  </p>
  
  <p>
  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="../../../../tags/r">R</a
    >, 
    
    <a href="../../../../tags/json-ld">json-ld</a
    >
    
  </span>
  
  
  </p>

</div>

 
  <br />
  
  <p><a class="btn btn-primary btn-round" rel="prev" href='../../../../2017/05/17/using-travis-ci-in-research-compendia-and-student-repos/'><i class="fa fa-chevron-left"></i> prev</a>
    <a class="btn btn-primary btn-round" rel="next" href='../../../../2017/12/11/data-rectangling-with-jq/'>next <i class="fa fa-chevron-right"></i></a></p>

  <br />

<p> <a class="btn btn-primary btn-round" 
         href='https://github.com/cboettig/labnotebook/blob/master/content/lab-notebook/2017-12-05-json-ld-vita.Rmd'><i class="icon-rlogo"></i> RMarkdown</a></p>


  <p> <a class="btn btn-primary btn-round" 
         href='https://github.com/cboettig/labnotebook/commits/master/content/lab-notebook/2017-12-05-json-ld-vita.Rmd'><i class="fa fa-clock-o"></i> History</a></p>

  <p> <i class="fa fa-barcode"></i> SHA: <a href="https://github.com/cboettig/labnotebook/blob/5f6ba6eebaf5298ea74a5f77d81e4f0bfbc3d3eb/content/lab-notebook/2017-12-05-json-ld-vita.html">5f6ba6ee</a></p> 


</aside>


          </div>
        </div>  
      </div>
      <section id="comments">
      <div id="disqus_thread">
        <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "cboettig" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
      </section>
    </div>
  </div>
</div>
    






  <footer class="footer">
  <div class="container text-muted">
	  <nav class="pull-left">
	    <ul>
	    
        

        <li class="nav-item">
          <a href="https://cejce.berkeley.edu/ohloneland"><i class="material-icons">pin_drop</i> UC Berkeley sits on the territory of xučyun (Huichin), the ancestral and unceded land of the Chochenyo speaking Ohlone people, the successors of the sovereign Verona Band of Alameda County</a>
        </li>
        
      
        

        <li class="nav-item">
          <a href="https://localcontexts.org/notice/open-to-collaborate/"><img src="../../../../localcontexts/Open_To_Collaborate.svg" width="24"> Open To Collaborate</a>
        </li>
        
      
      </ul>
    </nav>
	  <div class="copyright pull-right">
	    <img src="../../../../img/cc-by.svg"/>
	  </div>
	</div>
</footer>


  </body>
  

<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>
<script async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>






<script src="../../../../js/core/popper.min.js" type="text/javascript"></script>
<script src="../../../../js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
<script src="../../../../js/plugins/moment.min.js"></script>



<script src="../../../../js/plugins/nouislider.min.js" type="text/javascript"></script>



<script src="../../../../js/material-kit.min.js?v=2.0.4" type="text/javascript"></script>

<script src="../../../../highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>$(document).ready(function() { $('body').bootstrapMaterialDesign(); });</script>



  
    
      
    
  


</html>
